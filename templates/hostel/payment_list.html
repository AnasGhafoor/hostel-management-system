{% extends 'hostel/base.html' %}
{% block content %}
<h2 class="mb-3">Payments</h2>

<a href="{% url 'payment_add' %}" class="btn btn-success mb-3">Add Payment</a>

<div class="table-responsive">
  <table class="table table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>Student</th>
        <th>Room</th>
        <th>Month</th>
        <th>Rent</th>
        <th>Mess</th>
        <th>Extra</th>
        <th>Total</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
    {% for p in payments %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ p.student.name }}</td>
        <td>{% if p.student.room %}{{ p.student.room.room_no }}{% else %}-{% endif %}</td>
        <td>{{ p.month }}</td>
        <td>{{ p.rent_amount }}</td>
        <td>{{ p.mess_bill }}</td>
        <td>{{ p.extra }}</td>
        <td>{{ p.total }}</td>
        <td>{{ p.status }}</td>
        <td>
          <a class="btn btn-sm btn-warning" href="{% url 'payment_edit' p.pk %}">Edit</a>
          <a class="btn btn-sm btn-danger" href="{% url 'payment_delete' p.pk %}" onclick="return confirm('Delete this payment?')">Delete</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="10" class="text-center text-muted">No payments found.</td></tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
